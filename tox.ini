[tox]
envlist =
    coverage-clean
    py27-django{111},
    py34-django{111,20},
    py35-django{111,20,21,master},
    py36-django{111,20,21,master},
    py37-django{21,master}
    coverage-report,
    flake8,
    docs

[testenv]
basepython:
    py27: python2.7
    py34: python3.4
    py35: python3.5
    py36: python3.6
    py37: python3.7
ignore_outcome =
    py37: True
usedevelop = true
setenv =
    PYTHONPATH={toxinidir}
pip_pre = true
deps =
    coverage
    django111: Django>=1.11,<2.0
    django20: Django>=2.0,<2.1
    django21: Django==2.1.0b1
    djangomaster: https://github.com/django/django/archive/master.tar.gz
commands =
    coverage run --source=bootstrap4 manage.py test -v1 --noinput

[testenv:coverage-clean]
basepython = python3.6
commands = coverage erase

[testenv:coverage-report]
basepython = python3.6
commands =
    coverage report
    coverage html

[testenv:flake8]
basepython = python3.6
commands = flake8
deps = flake8

[flake8]
basepython = python3.6
ignore = F401,E731,W503
exclude = .git,.tox,__pycache__
max-line-length = 120

[testenv:docs]
basepython = python3.6
changedir = docs
deps =
    Django>=1.11,<1.12
    sphinx
    sphinx_rtd_theme
commands = sphinx-build -b html -d _build/doctrees . _build/html
